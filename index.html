<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Rezepte</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <!-- Deine bestehenden CSS-Variablen (falls vorhanden) -->
  <style>
    :root{
      --mint:#CFF5E7;
      --rosa:#FFD3E2;
      --orange:#FFE6CC;
      --blau:#E6F2FF;
      --muted:#666;
      --shadow:0 8px 20px rgba(0,0,0,0.08);
    }
    /* (Deine bestehenden Klassen werden unten 1:1 ergÃ¤nzt) */
  </style>
</head>
<body>

<!-- =========================================================
     OBERER BEREICH: QUICK-JUMP + GLOBALE TOCs (pro Kategorie)
========================================================= -->
<section id="quickjump" style="padding:16px; background:#fff; border-bottom:1px solid #eee; position:sticky; top:0; z-index:50;">
  <div style="display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
    <strong>ğŸ” Schnellzugriff:</strong>
    <label> Kategorie
      <select id="qj-category">
        <option value="">â€” wÃ¤hlen â€”</option>
        <option value="FrÃ¼hstÃ¼ck">FrÃ¼hstÃ¼ck</option>
        <option value="Hauptspeisen">Hauptspeisen</option>
        <option value="Bakery">Bakery</option>
        <option value="Snacks">Snacks & Desserts</option>
        <option value="Drinks">Drinks</option>
      </select>
    </label>
    <label> Unterkategorie
      <select id="qj-subcategory" disabled>
        <option value="">â€” zuerst Kategorie â€”</option>
      </select>
    </label>
    <button id="qj-go" type="button">Springen</button>
  </div>
</section>

<script>
/* ========= Quickjump Dropdowns (ohne Style-Ã„nderung) ========= */
(function(){
  const CATS = {
    "FrÃ¼hstÃ¼ck": ["Brot & Aufstriche", "Sonstiges"],
    "Hauptspeisen": [
      "Suppen & EintÃ¶pfe",
      "Pasta & Nudeln",
      "Pizza",
      "Reis- & Getreidegerichte",
      "Internationale KÃ¼che & Currys",
      "Snacks, Beilagen & Fingerfood",
      "Basics & Saucen",
      "Curry-Pasten"
    ],
    "Bakery": [
      "Kuchen & Torten",
      "PlÃ¤tzchen & KleingebÃ¤ck",
      "Sonstiges GebÃ¤ck"
    ],
    "Snacks": [], /* Snacks & Desserts als Gesamt-Kategorie ohne Sub */
    "Drinks": ["Alkoholische GetrÃ¤nke", "Nicht-alkoholische GetrÃ¤nke"]
  };

  const $cat = document.getElementById('qj-category');
  const $sub = document.getElementById('qj-subcategory');
  const $go  = document.getElementById('qj-go');

  $cat.addEventListener('change', ()=>{
    const v = $cat.value || '';
    const subs = CATS[v] || [];
    $sub.innerHTML = '';
    if (!v){ $sub.disabled = true; $sub.innerHTML = '<option value="">â€” zuerst Kategorie â€”</option>'; return; }
    if (!subs.length){
      $sub.disabled = true;
      $sub.innerHTML = '<option value="">(keine Unterkategorien)</option>';
      return;
    }
    $sub.disabled = false;
    $sub.insertAdjacentHTML('beforeend','<option value="">â€” wÃ¤hlen â€”</option>');
    subs.forEach(s=>{
      const opt = document.createElement('option');
      opt.value = s;
      opt.textContent = s;
      $sub.appendChild(opt);
    });
  });

  function slug(s){
    return (s||'').toLowerCase()
      .normalize('NFD').replace(/\p{Diacritic}/gu,'')
      .replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');
  }

  $go.addEventListener('click', ()=>{
    const c = $cat.value;
    const s = $sub.value;
    if (!c) return;
    if (c === 'Snacks'){ location.hash = '#snacks-cover'; return; }
    if (!s){
      if (c === 'FrÃ¼hstÃ¼ck') location.hash = '#fruehstueck-cover';
      else if (c === 'Hauptspeisen') location.hash = '#hauptspeisen-cover';
      else if (c === 'Bakery') location.hash = '#bakery-cover';
      else if (c === 'Drinks') location.hash = '#drinks-cover';
      return;
    }
    // zu Subcover springen
    const map = {
      "FrÃ¼hstÃ¼ck": {
        "Brot & Aufstriche":"#fruehstueck-brot-aufstriche-cover",
        "Sonstiges":"#fruehstueck-sonstiges-cover"
      },
      "Hauptspeisen":{
        "Suppen & EintÃ¶pfe":"#suppen-und-eintoepfe-cover",
        "Pasta & Nudeln":"#pasta-und-nudeln-cover",
        "Pizza":"#pizza-cover",
        "Reis- & Getreidegerichte":"#reis-und-getreide-cover",
        "Internationale KÃ¼che & Currys":"#internationale-kueche-und-currys-cover",
        "Snacks, Beilagen & Fingerfood":"#snacks-beilagen-und-fingerfood-cover",
        "Basics & Saucen":"#basics-und-saucen-cover",
        "Curry-Pasten":"#curry-pasten-cover"
      },
      "Bakery":{
        "Kuchen & Torten":"#kuchen-und-torten-cover",
        "PlÃ¤tzchen & KleingebÃ¤ck":"#plaetzchen-und-kleingebaeck-cover",
        "Sonstiges GebÃ¤ck":"#sonstiges-gebaeck-cover"
      },
      "Drinks":{
        "Alkoholische GetrÃ¤nke":"#drinks-alkoholisch-cover",
        "Nicht-alkoholische GetrÃ¤nke":"#drinks-nicht-alkoholisch-cover"
      }
    };
    const target = map[c] && map[c][s];
    if (target){ location.hash = target; }
  });
})();
</script>

<!-- =========================================================
     KATEGORIE-ÃœBERSCHRIFTEN & TOC-Bereiche (bleiben bestehen)
========================================================= -->

<!-- FRÃœHSTÃœCK COVER -->
<section id="fruehstueck-cover" class="cover fruehstueck" 
         style="background:#fffacd; min-height:40vh; display:flex; align-items:center; justify-content:center; text-align:center; padding:30px; border-radius:16px; margin:20px 12px;">
  <div style="background:#fff; border:3px dashed #f1d26a; border-radius:16px; padding:26px; max-width:92%; box-shadow:var(--shadow);">
    <h1 style="font-size:2em; margin:0;">ğŸ¥£ FrÃ¼hstÃ¼ck</h1>
    <p style="margin-top:10px; font-size:1em; color:var(--muted);">Guter Start in den Tag.</p>
    <div class="cat" style="margin-top:14px; text-align:left;">
      <h3>Inhalt</h3>
      <ul id="toc-fruehstueck" style="padding-left:18px;"></ul>
    </div>
  </div>
</section>

<!-- FrÃ¼hstÃ¼ck Subcovers -->
<section id="fruehstueck-brot-aufstriche-cover" class="cover fruehstueck" 
         style="background:#fffacd; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 12px;">
  <h1 style="font-size:2em; margin:0;">ğŸ Brot & Aufstriche</h1>
  <div class="cat"><ul id="toc-fruehstueck-brot" style="padding-left:18px;"></ul></div>
</section>
<section id="fruehstueck-sonstiges-cover" class="cover fruehstueck" 
         style="background:#fffacd; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 12px;">
  <h1 style="font-size:2em; margin:0;">ğŸŒ¤ï¸ Sonstiges</h1>
  <div class="cat"><ul id="toc-fruehstueck-sonstiges" style="padding-left:18px;"></ul></div>
</section>

<!-- HAUPTSPEISEN COVER -->
<section id="hauptspeisen-cover" class="cover hauptspeisen" 
         style="background:var(--mint); min-height:70vh; display:flex; align-items:center; justify-content:center; text-align:center; padding:30px;">
  <div style="background:#fff; border:3px dashed #8fdac7; border-radius:16px; padding:30px; max-width:92%; box-shadow:var(--shadow);">
    <h1 style="font-size:2em; margin:0;">ğŸ¥— Hauptspeisen</h1>
    <p style="margin-top:10px; font-size:1em; color:var(--muted);">VielfÃ¤ltig, nahrhaft & voller Genuss.</p>
    <div class="cat" style="margin-top:14px; text-align:left;">
      <h3>Inhalt</h3>
      <ul id="toc-hauptspeisen" style="padding-left:18px;"></ul>
    </div>
  </div>
</section>

<!-- Hauptspeisen Subcovers (deine Originale, gleich gelassen) -->
<section id="suppen-und-eintoepfe-cover" class="cover hauptspeisen" 
         style="background-color:#CFF5E7; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">ğŸ² Suppen & EintÃ¶pfe</h1>
  <div class="cat"><ul id="toc-suppen-eintoepfe" style="padding-left:18px;"></ul></div>
</section>

<section id="pasta-und-nudeln-cover" class="cover hauptspeisen" 
         style="background-color:#CFF5E7; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">ğŸ Pasta & Nudeln</h1>
  <div class="cat"><ul id="toc-pasta-nudeln" style="padding-left:18px;"></ul></div>
</section>

<section id="pizza-cover" class="cover hauptspeisen" 
         style="background-color:#CFF5E7; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">ğŸ• Pizza</h1>
  <div class="cat"><ul id="toc-pizza" style="padding-left:18px;"></ul></div>
</section>

<section id="reis-und-getreide-cover" class="cover hauptspeisen" 
         style="background-color:#CFF5E7; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">ğŸš Reis- & Getreidegerichte</h1>
  <div class="cat"><ul id="toc-reis-getreide" style="padding-left:18px;"></ul></div>
</section>

<section id="internationale-kueche-und-currys-cover" class="cover hauptspeisen" 
         style="background-color:#CFF5E7; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">ğŸŒ Internationale KÃ¼che & Currys</h1>
  <div class="cat"><ul id="toc-internationale-currys" style="padding-left:18px;"></ul></div>
</section>

<section id="snacks-beilagen-und-fingerfood-cover" class="cover hauptspeisen" 
         style="background-color:#CFF5E7; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">ğŸ¥— Snacks, Beilagen & Fingerfood</h1>
  <div class="cat"><ul id="toc-snacks-beilagen" style="padding-left:18px;"></ul></div>
</section>

<section id="basics-und-saucen-cover" class="cover hauptspeisen" 
         style="background-color:#CFF5E7; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">ğŸ¥« Basics & Saucen</h1>
  <div class="cat"><ul id="toc-basics-saucen" style="padding-left:18px;"></ul></div>
</section>

<section id="curry-pasten-cover" class="cover hauptspeisen" 
         style="background-color:#CFF5E7; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">ğŸŒ¶ï¸ Curry-Pasten</h1>
  <div class="cat"><ul id="toc-curry-pasten" style="padding-left:18px;"></ul></div>
</section>

<!-- BAKERY COVER -->
<section id="bakery-cover" class="cover bakery" 
         style="background:var(--rosa); min-height:70vh; display:flex; align-items:center; justify-content:center; text-align:center; padding:30px;">
  <div style="background:#fff; border:3px dashed #e89bb4; border-radius:16px; padding:30px; max-width:92%; box-shadow:var(--shadow);">
    <h1 style="font-size:2em; margin:0;">ğŸ° Bakery</h1>
    <p style="margin-top:10px; font-size:1em; color:var(--muted);">SÃ¼ÃŸ, frisch & einfach unwiderstehlich.</p>
    <div class="cat" style="margin-top:14px; text-align:left;">
      <h3>Inhalt</h3>
      <ul id="toc-bakery" style="padding-left:18px;"></ul>
    </div>
  </div>
</section>

<section id="kuchen-und-torten-cover" class="cover bakery" 
         style="background-color:#FFD3E2; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">ğŸ° Kuchen & Torten</h1>
  <div class="cat"><ul id="toc-kuchen-torten" style="padding-left:18px;"></ul></div>
</section>

<section id="plaetzchen-und-kleingebaeck-cover" class="cover bakery" 
         style="background-color:#FFD3E2; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">PlÃ¤tzchen & KleingebÃ¤ck</h1>
  <div class="cat"><ul id="toc-plaetzchen" style="padding-left:18px;"></ul></div>
</section>

<section id="sonstiges-gebaeck-cover" class="cover bakery" 
         style="background-color:#FFD3E2; padding:60px 20px; text-align:center; border-radius:18px; margin:20px 0;">
  <h1 style="font-size:2em; margin:0;">Sonstiges GebÃ¤ck</h1>
  <div class="cat"><ul id="toc-sonstiges-gebaeck" style="padding-left:18px;"></ul></div>
</section>

<!-- SNACKS COVER -->
<section id="snacks-cover" class="cover snacks" 
         style="background:var(--orange); min-height:70vh; display:flex; align-items:center; justify-content:center; text-align:center; padding:30px;">
  <div style="background:#fff; border:3px dashed #ffb266; border-radius:16px; padding:30px; max-width:92%; box-shadow:var(--shadow);">
    <h1 style="font-size:2em; margin:0;">ğŸŠ Snacks & Desserts</h1>
    <p style="margin-top:10px; font-size:1em; color:var(--muted);">Kleine SÃ¼nden fÃ¼r zwischendurch.</p>
    <div class="cat" style="margin-top:14px; text-align:left;">
      <h3>Inhalt</h3>
      <ul id="toc-snacks" style="padding-left:18px;"></ul>
    </div>
  </div>
</section>

<!-- DRINKS COVER -->
<section id="drinks-cover" class="cover drinks" 
         style="background:var(--blau); min-height:70vh; display:flex; align-items:center; justify-content:center; text-align:center; padding:30px;">
  <div style="background:#fff; border:3px dashed #99cfff; border-radius:16px; padding:30px; max-width:92%; box-shadow:var(--shadow);">
    <h1 style="font-size:2em; margin:0;">ğŸ¹ Drinks</h1>
    <p style="margin-top:10px; font-size:1em; color:var(--muted);">Erfrischend, bunt & manchmal ein bisschen frech.</p>
    <div class="cat" style="margin-top:14px; text-align:left;">
      <h3>Inhalt</h3>
      <ul id="toc-drinks" style="padding-left:18px;"></ul>
    </div>
  </div>
</section>

<!-- Drinks Subcovers (NEU, aber im selben Stil) -->
<section id="drinks-alkoholisch-cover" class="cover drinks" 
         style="background:var(--blau); padding:60px 20px; text-align:center; border-radius:18px; margin:20px 12px;">
  <h1 style="font-size:2em; margin:0;">ğŸ¸ Alkoholische GetrÃ¤nke</h1>
  <div class="cat"><ul id="toc-drinks-alkoholisch" style="padding-left:18px;"></ul></div>
</section>
<section id="drinks-nicht-alkoholisch-cover" class="cover drinks" 
         style="background:var(--blau); padding:60px 20px; text-align:center; border-radius:18px; margin:20px 12px;">
  <h1 style="font-size:2em; margin:0;">ğŸ§Š Nicht-alkoholische GetrÃ¤nke</h1>
  <div class="cat"><ul id="toc-drinks-nicht-alkoholisch" style="padding-left:18px;"></ul></div>
</section>

<!-- =========================================================
     ANKER fÃ¼r dynamisches EinfÃ¼gen (hinter jedem Cover)
========================================================= -->
<div id="anchor-fruehstueck"></div>
<div id="anchor-fruehstueck-brot"></div>
<div id="anchor-fruehstueck-sonstiges"></div>

<div id="anchor-hauptspeisen"></div>
<div id="anchor-suppen-eintoepfe"></div>
<div id="anchor-pasta-nudeln"></div>
<div id="anchor-pizza"></div>
<div id="anchor-reis-getreide"></div>
<div id="anchor-internationale-currys"></div>
<div id="anchor-snacks-beilagen"></div>
<div id="anchor-basics-saucen"></div>
<div id="anchor-curry-pasten"></div>

<div id="anchor-bakery"></div>
<div id="anchor-kuchen-torten"></div>
<div id="anchor-plaetzchen"></div>
<div id="anchor-sonstiges-gebaeck"></div>

<div id="anchor-snacks"></div>

<div id="anchor-drinks"></div>
<div id="anchor-drinks-alkoholisch"></div>
<div id="anchor-drinks-nicht-alkoholisch"></div>

<!-- =========================================================
     DEINE STYLES (1:1 gelassen)
========================================================= -->
<style>
.recipe.fruehstueck {
  background: #fffacd; /* Pastellgelb */
  border: 2px solid #f1d26a;
  border-radius: 16px;
  padding: 18px;
  margin: 18px 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}
.recipe.fruehstueck h2 { margin-top: 0; }
.meta {
  background: #fef4c5;
  padding: 8px 10px;
  border-radius: 10px;
  font-size: 0.95rem;
}
.zutaten h3, .zubereitung h3 { margin-bottom: 6px; }
.zutaten ul { padding-left: 22px; }
.back-button {
  display: inline-block;
  margin-top: 14px;
  text-decoration: none;
  background: #f8dfa6;
  border: 1px solid #e5c56a;
  padding: 8px 12px;
  border-radius: 10px;
  color: #3a2e00;
}
.back-button:hover { filter: brightness(0.97); }

.recipe.hauptspeisen {
  background: #e7fff0;
  border: 2px solid #9ce0b3;
  border-radius: 16px;
  padding: 18px;
  margin: 18px 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}
.recipe.hauptspeisen h2 { margin-top: 0; }
</style>

<!-- ====================== GLOBAL SERVINGS FIX + CLEANUP ====================== -->
<style>
  /* Alle "ZurÃ¼ck"-Buttons komplett ausblenden */
  .back-button { display: none !important; }

  /* Optional: hÃ¼bscher iPhone-Look fÃ¼r die Rezepte (keine Pflicht) */
  @media (max-width: 430px) {
    .recipe { margin: 16px 10px; border-radius: 18px; }
    .recipe h2 { font-size: 1.15rem; }
    .meta input[type="number"] { width: 64px !important; }
  }
</style>

<!-- =========================================================
     JS: Gemeinsame Helfer + Registry + Sortierer + Renderer
========================================================= -->
<script>
/* ===== Deine (alte) Minimal-Funktion fÃ¼r Direkt-Skalierung â€“ bleibt bestehen ===== */
if (typeof window.updateRecipe !== 'function') {
  window.updateRecipe = function(listSelector, inputSelector) {
    const factor = Math.max(1, parseFloat(document.querySelector(inputSelector).value || 1));
    document.querySelectorAll(listSelector + " [data-base]").forEach(el => {
      const base = parseFloat(el.getAttribute("data-base"));
      if (!isNaN(base)) {
        const scaled = (base % 1 === 0) ? Math.round(base * factor) : Math.round(base * factor * 10)/10;
        el.textContent = scaled;
      }
    });
  };
}

/* ===== Kategorie-Registry (NEU: mit deinen zusÃ¤tzlichen Subkategorien) ===== */
window.CATS = {
  "FrÃ¼hstÃ¼ck": {
    cover: "#fruehstueck-cover",
    toc:   "#toc-fruehstueck",
    anchor:"#anchor-fruehstueck",
    subs: {
      "Brot & Aufstriche": {
        cover:"#fruehstueck-brot-aufstriche-cover",
        toc:"#toc-fruehstueck-brot",
        anchor:"#anchor-fruehstueck-brot"
      },
      "Sonstiges": {
        cover:"#fruehstueck-sonstiges-cover",
        toc:"#toc-fruehstueck-sonstiges",
        anchor:"#anchor-fruehstueck-sonstiges"
      }
    }
  },
  "Hauptspeisen": {
    cover:"#hauptspeisen-cover",
    toc:"#toc-hauptspeisen",
    anchor:"#anchor-hauptspeisen",
    subs:{
      "Suppen & EintÃ¶pfe": { cover:"#suppen-und-eintoepfe-cover", toc:"#toc-suppen-eintoepfe", anchor:"#anchor-suppen-eintoepfe" },
      "Pasta & Nudeln":    { cover:"#pasta-und-nudeln-cover", toc:"#toc-pasta-nudeln", anchor:"#anchor-pasta-nudeln" },
      "Pizza":             { cover:"#pizza-cover", toc:"#toc-pizza", anchor:"#anchor-pizza" },
      "Reis- & Getreidegerichte": { cover:"#reis-und-getreide-cover", toc:"#toc-reis-getreide", anchor:"#anchor-reis-getreide" },
      "Internationale KÃ¼che & Currys": { cover:"#internationale-kueche-und-currys-cover", toc:"#toc-internationale-currys", anchor:"#anchor-internationale-currys" },
      "Snacks, Beilagen & Fingerfood": { cover:"#snacks-beilagen-und-fingerfood-cover", toc:"#toc-snacks-beilagen", anchor:"#anchor-snacks-beilagen" },
      "Basics & Saucen": { cover:"#basics-und-saucen-cover", toc:"#toc-basics-saucen", anchor:"#anchor-basics-saucen" },
      "Curry-Pasten":    { cover:"#curry-pasten-cover", toc:"#toc-curry-pasten", anchor:"#anchor-curry-pasten" }
    }
  },
  "Bakery": {
    cover:"#bakery-cover",
    toc:"#toc-bakery",
    anchor:"#anchor-bakery",
    subs:{
      "Kuchen & Torten": { cover:"#kuchen-und-torten-cover", toc:"#toc-kuchen-torten", anchor:"#anchor-kuchen-torten" },
      "PlÃ¤tzchen & KleingebÃ¤ck": { cover:"#plaetzchen-und-kleingebaeck-cover", toc:"#toc-plaetzchen", anchor:"#anchor-plaetzchen" },
      "Sonstiges GebÃ¤ck": { cover:"#sonstiges-gebaeck-cover", toc:"#toc-sonstiges-gebaeck", anchor:"#anchor-sonstiges-gebaeck" }
    }
  },
  "Snacks": {
    cover:"#snacks-cover",
    toc:"#toc-snacks",
    anchor:"#anchor-snacks",
    subs:{}
  },
  "Drinks": {
    cover:"#drinks-cover",
    toc:"#toc-drinks",
    anchor:"#anchor-drinks",
    subs:{
      "Alkoholische GetrÃ¤nke": { cover:"#drinks-alkoholisch-cover", toc:"#toc-drinks-alkoholisch", anchor:"#anchor-drinks-alkoholisch" },
      "Nicht-alkoholische GetrÃ¤nke": { cover:"#drinks-nicht-alkoholisch-cover", toc:"#toc-drinks-nicht-alkoholisch", anchor:"#anchor-drinks-nicht-alkoholisch" }
    }
  }
};

/* ===== Sortier-Helfer (wie Ã¼blich, alphabetisch nach H2) ===== */
window.insertSortedSection = function({ section, cat, sub }){
  const parent = (function(){
    const C = window.CATS[cat];
    if(!C) return document.body;
    if(sub && C.subs && C.subs[sub] && C.subs[sub].anchor) {
      return document.querySelector(C.subs[sub].anchor) || document.body;
    }
    return document.querySelector(C.anchor) || document.body;
  })();

  const h2Text = section.querySelector('h2')?.textContent.trim().toLowerCase() || '';
  const siblings = Array.from(parent.parentNode.querySelectorAll('section.recipe'))
    .filter(s=> (s.dataset.category===cat) && ( (sub && s.dataset.subcategory===sub) || (!sub && !s.dataset.subcategory) ));

  // finde Position: erstes Rezept mit H2 > h2Text
  let inserted = false;
  for (const sib of siblings){
    const t = sib.querySelector('h2')?.textContent.trim().toLowerCase() || '';
    if (t.localeCompare(h2Text, 'de') > 0){
      sib.insertAdjacentElement('beforebegin', section);
      inserted = true;
      break;
    }
  }
  if(!inserted){
    // Hinter den passenden Anker setzen
    parent.insertAdjacentElement('afterend', section);
  }
};

window.insertSortedTOC = function(ul, li){
  const text = li.querySelector('a')?.textContent?.trim().toLowerCase() || '';
  const items = Array.from(ul.querySelectorAll('li'));
  for(const i of items){
    const t = i.querySelector('a')?.textContent?.trim().toLowerCase() || '';
    if (t.localeCompare(text, 'de') > 0){
      i.insertAdjacentElement('beforebegin', li);
      return;
    }
  }
  ul.appendChild(li);
};

/* ===== resolveTargets: findet TOC-UL & EinfÃ¼ge-Anker anhand Kategorie/Sub ===== */
window.resolveTargets = function(cat, sub){
  const C = window.CATS[cat]




  
